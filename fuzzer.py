#!/usr/bin/python

import sys
import os
import subprocess

target = "./amazon_echo"
parameter = ""

for current in range(1000):
	parameter += ("A" * 10)
	print "Fuzzing with " + str(len(parameter)) + " bytes..."
	retcode = subprocess.call([target, parameter])
	if retcode != 0 and retcode != 1:
		print "Returned code " + str(retcode) + " when passed " + str(len(parameter)) + " bytes"
		sys.exit(0)

print "Finished fuzzing.  No undefined behavior found."